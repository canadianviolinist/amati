header_footer_wgl_jsonp([12],{364:function(module,exports,__webpack_require__){var createTagPromise=function(){var _resolve=void 0,_reject=void 0,promise=new Promise(function(resolve,reject){_resolve=resolve,_reject=reject});return promise.resolve=_resolve,promise.reject=_reject,promise.isSettled=!1,promise},isAllOK=function(eventType,data){return _.isUndefined(eventType)||_.isUndefined(data)?(log.error("Tag Manager Exception : eventType and/or data missing!"),!1):-1!==_.indexOf(validEventTypes,eventType)||(log.error("Tag Manager Exception : invalid eventType!"),!1)},fireTags=function(eventType,data){window.utag[eventType](data)},tryResolvingLibPromise=function(){window.utag&&(tagLibPromise.isSettled||(tagLibPromise.resolve("Tag manager library already loaded"),tagLibPromise.isSettled=!0))},tryResolvingViewPromise=function(){window.utag&&window.utag_data&&Object.keys(window.utag_data).length>0&&!viewTagPromise.isSettled&&(viewTagPromise.resolve("view tag already fired."),viewTagPromise.isSettled=!0)},fireEventTag=function(eventType,data){eventType===validEventTypes[0]?function(data){tryResolvingLibPromise(),tagLibPromise.then(function(){fireTags("view",data),viewTagPromise.isSettled||(viewTagPromise.resolve("view tag"),viewTagPromise.isSettled=!0)}).catch(function(){viewTagPromise.isSettled||(viewTagPromise.reject("Tag library promise got rejected, thus cant fire any tags."),viewTagPromise.isSettled=!0)})}(data):function(data){tryResolvingLibPromise(),tryResolvingViewPromise(),viewTagPromise.then(function(){fireTags("link",data)})}(data)},_=__webpack_require__(27),log=__webpack_require__(138),validEventTypes=["view","link"],validBrands=["mcom","bcom"],viewTagPromise=createTagPromise(),tagLibPromise=createTagPromise();module.exports={fireTag:function(eventType,data){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{immediate:!1};isAllOK(eventType,data)&&(options.immediate?function(eventType){return _.isUndefined(window.utag)?(log.error("Tag Manager Exception: window.utag missing!"),!1):!_.isUndefined(window.utag[eventType])||(log.error("Tag Manager Exception: utag."+eventType+" missing!"),!1)}(eventType)&&(fireTags(eventType,data),tryResolvingLibPromise(),tryResolvingViewPromise()):fireEventTag(eventType,data))},updateUtagDataFireTag:function(eventType,data){!isAllOK(eventType,data)||window.utag&&_.isUndefined(window.utag.data)&&(log.error("Tag Manager Exception: window.utag.data missing!"),1)||!window.utag||(delete window.utag.data.adobe_page_name,fireEventTag(eventType,_.extend(window.utag.data,data)))},loadTagLibrary:function(brand,environment){if(_.isUndefined(window.utag))if(function(brand){return _.indexOf(validBrands,brand)>=0||(log.error("Tag Manager Exception : invalid brand name!"),!1)}(brand))if(_.isUndefined(environment))tagLibPromise.reject(new Error("Environment name is missing")),tagLibPromise.isSettled=!0;else{var scriptTag=document.createElement("script");scriptTag.type="text/javascript",scriptTag.async=!0,scriptTag.onload=function(){tagLibPromise.resolve("Tag manager library loaded"),tagLibPromise.isSettled=!0},scriptTag.onerror=function(){tagLibPromise.reject(new Error("Unable to load tag manager library")),tagLibPromise.isSettled=!0};var brandName="mcom"===brand?"macys":brand;scriptTag.src="//tags.tiqcdn.com/utag/"+brandName+"/main/"+environment+"/utag.js";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(scriptTag,firstScriptTag)}else tagLibPromise.reject(new Error("Invalid brand name. Possible values are : "+validBrands)),tagLibPromise.isSettled=!0;else tryResolvingLibPromise(),tryResolvingViewPromise();return tagLibPromise}}},606:function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_backbone2=_interopRequireDefault(__webpack_require__(97)),_Globals2=_interopRequireDefault(__webpack_require__(365)),_Cookie2=_interopRequireDefault(__webpack_require__(357)),_TagManagerUtil2=_interopRequireDefault(__webpack_require__(364)),_StringUtil2=_interopRequireDefault(__webpack_require__(141)),_CaptureTiming=__webpack_require__(791),_DomainPath2=_interopRequireDefault(__webpack_require__(792));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(793),exports.default=_backbone2.default.ItemView.extend({modelEvents:{sync:"render"},events:{"click #href_goToUSSite":"goToUsSite","change .checkbox-label":"footerAccordionState","keypress .checkbox-label":"footerAccordionState","click .email":"fireLinkTag","click .starrewards":"fireLinkTag","click #href_changeCountry":"openInternationalContext","click #footerFlagShippingTo":"openInternationalContext"},initialize:function(){this.listenTo(this.model,"performanceInstrumentation:ready",this.renderHnFPerformanceInstrumentation)},goToUsSite:function(e){e.preventDefault();var cookieDomain=(0,_DomainPath2.default)(document.location.hostname);_Cookie2.default.set("shippingCountry","US",void 0,{expires:new Date((new Date).getTime()+31536e7),path:"/",domain:cookieDomain}),_Cookie2.default.set("currency","USD",void 0,{expires:new Date((new Date).getTime()+31536e7),path:"/",domain:cookieDomain});var meta=this.model.get("meta");meta="object"===(void 0===meta?"undefined":_typeof(meta))?meta:{};var redirectUrl=document.location.origin;meta.properties&&meta.properties.baseUrlSecure&&(redirectUrl=meta.properties.baseUrlSecure),e.mcomFooterTest||(window.location.href=redirectUrl+"/index.ognc?lid=glbbtmnav_go_to_us_site-intl")},renderHnFPerformanceInstrumentation:function(){var qVEndTime=window.performance.now(),meta=this.model.get("meta");(meta="object"===(void 0===meta?"undefined":_typeof(meta))?meta:{}).properties&&!0===meta.properties.hnfPerformanceInstrumentationEnabled&&(0,_CaptureTiming.saveTimeData)({appName:"SPO_MCOM_POLARIS_FOOTER_RESPONSIVE",name:"Polaris_Footer_Responsive",timeStart:_Globals2.default.getValue("qVStartTime"),timeEnd:qVEndTime,description:"Start and stop times for display of responsive footer",logging:!0})},footerAccordionState:function(e){e.preventDefault();var currentTarget=e.currentTarget,accordionFooterId=document.getElementById(currentTarget.getAttribute("for"));13!==e.keyCode&&32!==e.keyCode||(accordionFooterId.checked=!accordionFooterId.checked),currentTarget.setAttribute("aria-expanded",accordionFooterId.checked)},fireLinkTag:function(e){var footerelement=e.currentTarget.childNodes[1].attributes[0].nodeValue,utagData={link_name:_StringUtil2.default.getURLParameter("lid",footerelement)};_TagManagerUtil2.default.fireTag("link",utagData)},openInternationalContext:function(){var meta=this.model.get("meta");(meta="object"===(void 0===meta?"undefined":_typeof(meta))?meta:{}).properties&&!0===meta.properties.internationalContextDrawerEnabled&&__webpack_require__.e(9).then(__webpack_require__.bind(null,794)).then(function(_ref){var internationalcontext=new(0,_ref.default),hostname=window.location.hostname,fetchDomain=["customerservice-macys.com"].includes(hostname)?"www.macys.com":hostname,baseUrl=window.location.protocol+"//"+fetchDomain;internationalcontext.open(null,baseUrl)})}})},791:function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.log=exports.saveTimeData=void 0;var _jquery2=_interopRequireDefault(__webpack_require__(53)),_underscore2=_interopRequireDefault(__webpack_require__(27)),_Globals2=_interopRequireDefault(__webpack_require__(365)),_Logger2=_interopRequireDefault(__webpack_require__(138));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var timingCaptureDataModel={appName:"JSTimingAPIAppNameDefault",name:"CaptureTiming",description:"",timeStart:"",timeEnd:"",url:window.location.href,page_type:(0,_jquery2.default)("type:last").html(),page_layout:(0,_jquery2.default)("layout:last").html(),server:(0,_jquery2.default)("server:last").html(),release:(0,_jquery2.default)("release:last").html(),ts:(0,_jquery2.default)("timestamp:last").html()},host=window.location.host,logging=!1,log=function(opts){_Logger2.default.log(opts.name+" start time : "+opts.timeStart+" milliseconds "),_Logger2.default.log(opts.name+" stop time : "+opts.timeEnd+" milliseconds "),_Logger2.default.log(opts.name+" total load time : "+(opts.timeEnd-opts.timeStart)+" milliseconds ")};exports.saveTimeData=function(dataObj){logging=!!dataObj.logging,_underscore2.default.extend(timingCaptureDataModel,dataObj,{logging:""}),delete timingCaptureDataModel.logging;var urlContent="?msg="+window.encodeURIComponent(JSON.stringify(timingCaptureDataModel));_Globals2.default&&"true"===_Globals2.default.getValue("props.spoCaptureTimingEnabled")&&(-1!==host.indexOf(".fds.com")?_jquery2.default.ajax({type:"GET",url:"//metrics-dev.macys.net/1x1.gif"+urlContent}):1===_underscore2.default.random(0,5)&&_jquery2.default.ajax({type:"GET",url:"//metrics.macys.net/1x1.gif"+urlContent})),logging&&log(dataObj)},exports.log=log},792:function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(hostname){if("string"!=typeof hostname)return null;var domainTokens=hostname.split(".");return"http://localhost"===hostname?"localhost":(domainTokens.shift(),"."+domainTokens.join("."))}},793:function(module,exports){}});
//# sourceMappingURL=header-footer-wgl.viewFooterResponsive.9d21383232e00e786123.js.map