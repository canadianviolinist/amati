header_footer_wgl_jsonp([16],{593:function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_jquery2=_interopRequireDefault(__webpack_require__(53)),_pageApp2=_interopRequireDefault(__webpack_require__(137)),_Globals2=_interopRequireDefault(__webpack_require__(365)),_ParseObjectString2=_interopRequireDefault(__webpack_require__(418));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Channel=_pageApp2.default.channel?_pageApp2.default.channel:_pageApp2.default.default.channel,v={render:function(){}},viewIsReady=Promise.resolve(),render=function(callback){return viewIsReady.then(function(){v.render(),"function"==typeof callback&&(callback("radical"),Channel.trigger("quickbag:initialize"))})},getMetaProperties=function(model){var meta=model&&model.get("meta"),props=meta&&meta.properties||null;return!props||"dbedHeaderRedesignEnabledDesktopExp"in props||(props=null),props},renderRadical=function(view){var properties=getMetaProperties(view.model);properties&&"dbedHeaderRedesignEnabledDesktopExp"in properties&&(properties.dbedHeaderRedesignEnabledDesktopExp||(view.renderHnFPerformanceInstrumentation(),view.renderMediaRailAds(view.model.get("media")),view.runRenderLinkRail(),view.runReRenderShopDepartmentButtonLabel(),view.renderSearchAndBag(),view.loadShopByDepartmentHeaderClass(),view.renderShopByDepartmentDropdown(),Channel.trigger("mainNavigation:render")))},getMissingFlyouts=function(view){if(view&&view.model&&"function"==typeof view.model.fetch&&"function"==typeof view.model.setFobselectedFlag&&"function"==typeof view.getMainNavigationFobCount&&"function"==typeof view.getMainNavigationFlyoutCount&&"function"==typeof view.getMainNavigationCurrentFob){var flyoutMissing=0===view.getMainNavigationFobCount()&&0===view.getMainNavigationFlyoutCount()||view.getMainNavigationFobCount()!==view.getMainNavigationFlyoutCount(),currentFob=view.getMainNavigationCurrentFob();(currentFob&&currentFob.length>0||flyoutMissing)&&(view.model.setFobselectedFlag(!0),view.model.fetch({error:function(){view.model.trigger("mainNavModel:change")},success:function(){renderRadical(view),Channel.trigger("mainNavigation:render")}}))}},initWhenNotRendered=function(args){var create=args.create,options=args.options,MainNavModel=args.MainNavModel,Radical=args.Radical,radicalTemplate=args.radicalTemplate,resolve=args.resolve;(v=create(Radical,radicalTemplate,new MainNavModel)).model.get("hostlink")&&v.model.setHostLink(v.model.get("hostlink")),v.model.get("serviceproxy")&&v.model.setServiceProxy(v.model.get("serviceproxy")),v.model.set("shippingCountry",options.shippingCountry),v.model.set("domestic","US"===options.shippingCountry),resolve(),viewIsReady.then(function(){if(options.adaptiveNavData){var parsedModel=v.model.parse(options.adaptiveNavData);v.model.set("media",parsedModel.media),v.model.set("menu",parsedModel.menu),v.model.set("meta",parsedModel.meta),renderRadical(v),v.model.setFobselectedFlag(!0),Channel.trigger("mainNavigation:render"),getMissingFlyouts(v)}else v.model.fetch({error:function(){v.model.trigger("mainNavModel:change")}});v.model.set("bag",!0)})},initWhenRendered=function(args){var meta=_ParseObjectString2.default.toObject((0,_jquery2.default)("script[data-mcom-header-meta]").html(),"{}");meta.context||(meta.context={}),meta.properties||(meta.properties={}),meta.properties.segmentationHost&&!_Globals2.default.getValue("props.segmentationHost")&&_Globals2.default.setValue("props.segmentationHost",meta.properties.segmentationHost);var create=args.create,options=args.options,MainNavModel=args.MainNavModel,Radical=args.Radical,resolve=args.resolve;(v=create(Radical,!1,new MainNavModel)).hasMediaRailChildren()||v.hideMediaRail(),v.model.set("shippingCountry",options.shippingCountry),v.model.set("domestic","US"===options.shippingCountry),meta&&meta.properties&&v.model.setServiceProperties(meta.properties),meta&&meta.context&&v.model.setServiceContext(meta.context),resolve(),viewIsReady.then(function(){renderRadical(v),Channel.trigger("mainNavigation:render"),getMissingFlyouts(v)})};exports.default={getMissingFlyouts:getMissingFlyouts,init:function(create,options){return viewIsReady=new Promise(function(resolve){options.IS_RENDERED?Promise.all([__webpack_require__.e(8).then(__webpack_require__.bind(null,594)),__webpack_require__.e(5).then(__webpack_require__.bind(null,556))]).then(function(radicalAssets){var _radicalAssets2=_slicedToArray(radicalAssets,2),Radical=_radicalAssets2[0].default,MainNavModel=_radicalAssets2[1].default;initWhenRendered({create:create,options:options,MainNavModel:MainNavModel,Radical:Radical,resolve:resolve})}):Promise.all([__webpack_require__.e(8).then(__webpack_require__.bind(null,594)),__webpack_require__.e(19).then(__webpack_require__.bind(null,711)),__webpack_require__.e(5).then(__webpack_require__.bind(null,556))]).then(function(radicalAssets){var _radicalAssets=_slicedToArray(radicalAssets,3),Radical=_radicalAssets[0].default,templateRadical=_radicalAssets[1],MainNavModel=_radicalAssets[2].default,radicalTemplate=templateRadical.default?templateRadical.default:templateRadical;initWhenNotRendered({create:create,options:options,MainNavModel:MainNavModel,Radical:Radical,radicalTemplate:radicalTemplate,resolve:resolve})})})},initWhenNotRendered:initWhenNotRendered,initWhenRendered:initWhenRendered,render:render,reRender:function(callback){return render(function(viewType){v.renderMediaRailAds(v.model.media),Channel.trigger("mainNavigation:render"),"function"==typeof callback&&callback(viewType)})},renderRadical:renderRadical,getMetaProperties:getMetaProperties}}});
//# sourceMappingURL=header-footer-wgl.initRadicalHeader.2fa4df0b0f7c0e18e12a.js.map